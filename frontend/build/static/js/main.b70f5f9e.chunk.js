(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{122:function(e,t,n){},282:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(46),o=n.n(c),s=n(4),l=n(29),i=(n(122),n(20)),d=n(10),u=n(3),b=n.n(u),j=n(6),p=n(49),h=n(110),x=n.n(h).a.create({validateStatus:function(e){return e<300}}),f=["databaseModel"];function m(e){return g.apply(this,arguments)}function g(){return(g=Object(j.a)(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.databaseModel,r=Object(p.a)(t,f),e.next=3,x.post("/api/".concat(n,"/run"),r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=n(25);function v(e){return w.apply(this,arguments)}function w(){return(w=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/api/checkpoint?databaseModel=".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return y.apply(this,arguments)}function y(){return(y=Object(j.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).toLocaleString(),e.next=3,x.post("/api/checkpoint?databaseModel=".concat(t.databaseModel),Object(O.a)(Object(O.a)({},t),{},{timestamp:n}));case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return N.apply(this,arguments)}function N(){return(N=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/api/checkpoint/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M,L,S=Object(d.b)("checkpoint/fetch",function(){var e=Object(j.a)(b.a.mark((function e(t,n){var r,a,c,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,a=n.rejectWithValue,c=r(),(o=c.notebook).databaseModel){e.next=4;break}return e.abrupt("return",a("Rejected"));case 4:return e.prev=4,e.next=7,v(o.databaseModel);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",a(e.t0.response.data));case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t,n){return e.apply(this,arguments)}}()),D=Object(d.b)("checkpoint/save",function(){var e=Object(j.a)(b.a.mark((function e(t,n){var r,a,c,o,s,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,a=n.rejectWithValue,c=r(),o=c.editor,s=c.notebook,l=c.browser,s.selectedDataset&&s.databaseModel&&null!==l){e.next=4;break}return e.abrupt("return",a("Rejected"));case 4:return e.prev=4,e.next=7,k({editorState:o,browserState:l,databaseModel:s.databaseModel,selectedDataset:s.selectedDataset});case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",a(e.t0.response.data));case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t,n){return e.apply(this,arguments)}}()),B=Object(d.b)("checkpoint/load",function(){var e=Object(j.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,C(t);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0.response.data));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),I=Object(d.c)({name:"checkpoint",initialState:[],reducers:{},extraReducers:function(e){e.addCase(S.fulfilled,(function(e,t){return t.payload}))}}),R=Object(d.b)("editor/runCell",function(){var e=Object(j.a)(b.a.mark((function e(t,n){var r,a,c,o,s,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState,a=n.rejectWithValue,c=r(),o=c.notebook,s=c.editor,!(t>=s.cells.length)&&o.selectedDataset){e.next=4;break}return e.abrupt("return",a(null));case 4:return l=s.cells[t],e.prev=5,e.next=8,m({databaseModel:o.databaseModel,selectedDataset:o.selectedDataset,editorContent:l.editorContent});case 8:return e.abrupt("return",e.sent);case 11:return e.prev=11,e.t0=e.catch(5),e.abrupt("return",a(e.t0.response.data));case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t,n){return e.apply(this,arguments)}}()),W=Object(d.c)({name:"editor",initialState:{cells:[],cellCounter:0,execCounter:0,lastExecutedCellId:null,updateBrowserCellId:null},reducers:{addCell:function(e,t){var n=t.payload;e.cellCounter+=1;var r={id:e.cellCounter,execStatus:" ",errorStatus:!1,editorContent:"",numOfLines:0};null!==n?e.cells.splice(n+1,0,r):e.cells.push(r)},changeCell:function(e,t){var n=t.payload,r=n.index,a=n.value;e.cells[r].numOfLines=a.split("\n").length,e.cells[r].editorContent=a},deleteCell:function(e,t){var n=t.payload;null!==n?e.cells.splice(n,1):e.cells.pop()},swapCell:function(e,t){var n=t.payload,r=n.focusedCellIndex,a=r+n.step;e.cells.splice(a,0,e.cells.splice(r,1)[0])},loadCells:function(e,t){var n=t.payload;e.cells=n}},extraReducers:function(e){e.addCase(R.pending,(function(e,t){var n=t.meta.arg,r=e.cells[n];r.execStatus="*",r.errorStatus=!1})),e.addCase(R.fulfilled,(function(e,t){var n=t.meta.arg,r=e.cells[n];e.execCounter+=1,r.execStatus=e.execCounter,r.errorStatus=t.payload.hasCellError,e.lastExecutedCellId=r.id,t.payload.shouldUpdateBrowser&&(e.updateBrowserCellId=r.id)})),e.addCase(R.rejected,(function(e,t){var n=t.meta.arg,r=e.cells[n];r.execStatus=" ",r.errorStatus=!0})),e.addCase(B.fulfilled,(function(e,t){return t.payload.editorState}))}}),A=W.actions,E=A.addCell,P=A.changeCell,q=A.deleteCell,T=A.swapCell,J=(A.loadCells,Object(d.c)({name:"notebook",initialState:{loading:!1,error:null,databaseModel:null,selectedDataset:null,showCheckpointModal:!1},reducers:{selectDatabaseModel:function(e,t){var n=t.payload;e.databaseModel=n},selectDataset:function(e,t){var n=t.payload;e.selectedDataset=n},toggleCheckpointModal:function(e,t){var n=t.payload;e.showCheckpointModal=n}},extraReducers:function(e){e.addCase(R.pending,(function(e){e.loading=!0,e.error=null})),e.addCase(R.fulfilled,(function(e){e.loading=!1,e.error=null})),e.addCase(R.rejected,(function(e,t){e.loading=!1,e.error=t.error.message||null})),e.addCase(S.pending,(function(e){e.loading=!0,e.error=null})),e.addCase(S.fulfilled,(function(e){e.loading=!1,e.error=null})),e.addCase(S.rejected,(function(e,t){e.loading=!1,e.error=t.error.message||null})),e.addCase(D.pending,(function(e){e.loading=!0,e.error=null})),e.addCase(D.fulfilled,(function(e){e.loading=!1,e.error=null})),e.addCase(D.rejected,(function(e,t){e.loading=!1,e.error=t.error.message||null})),e.addCase(B.pending,(function(e){e.loading=!0,e.error=null})),e.addCase(B.fulfilled,(function(e,t){e.loading=!1,e.error=null,e.selectedDataset=t.payload.selectedDataset})),e.addCase(B.rejected,(function(e,t){e.loading=!1,e.error=t.error.message||null}))}})),V=J.actions,U=V.selectDatabaseModel,F=V.selectDataset,_=V.toggleCheckpointModal,z=["hasCellError","shouldUpdateBrowser"],H=Object(d.c)({name:"browser",initialState:{raw:"",table:"",console:""},reducers:{},extraReducers:function(e){e.addCase(R.fulfilled,(function(e,t){var n=t.payload,r=(n.hasCellError,n.shouldUpdateBrowser,Object(p.a)(n,z));return Object(O.a)(Object(O.a)({},e),r)})),e.addCase(B.fulfilled,(function(e,t){return t.payload.browserState}))}}),Q=Object(i.b)({notebook:J.reducer,browser:H.reducer,editor:W.reducer,checkpoint:I.reducer}),G=Object(d.a)({reducer:Q}),K=G.dispatch,X=n(7),Y=n(1);function Z(){var e=Object(s.b)();return Object(Y.jsx)("nav",{className:"flex flex-row items-center py-1 bg-blue-600 border-b-8 border-blue-200",children:Object(Y.jsxs)("div",{className:"flex flex-row items-center gap-6 text-white",children:[Object(Y.jsx)(l.b,{to:"/",onClick:function(){return e(U(null))},className:"no-underline py-2 px-8 hover:text-gray-300",children:Object(Y.jsx)("h1",{className:"font-bold text-3xl",children:"Data Jupyter"})}),Object(Y.jsx)(l.b,{to:"/postgresql",className:"underline py-2 text-blue-200 hover:text-white",children:Object(Y.jsx)("h1",{className:"font-bold text-l",children:"PostgreSQL"})}),Object(Y.jsx)(l.b,{to:"/mongodb",className:"underline py-2 text-blue-200 hover:text-white",children:Object(Y.jsx)("h1",{className:"font-bold text-l",children:"MongoDB"})})]})})}!function(e){e.Raw="Raw",e.Table="Table",e.Console="Console"}(M||(M={})),function(e){e.Mongodb="mongodb",e.Psql="psql"}(L||(L={}));var $=Object(Y.jsxs)("div",{children:[Object(Y.jsx)("h1",{className:"my-2 text-5xl text-center font-bold",children:"Instructions"}),Object(Y.jsx)("br",{}),Object(Y.jsx)("p",{children:"Data Jupyter is an interactive web application for simplifying the task of data processing on MongoDB and PostgreSQL databases. The main interface of Data Jupyter is modelled after the popular Jupyter Notebook, making it familiar to many data analysts. Data Jupyter also offers support for data traceability through its integrated checkpoint system and by enforcing a modular style of data processing."}),Object(Y.jsx)("br",{}),Object(Y.jsx)("h2",{className:"my-2 text-3xl font-semibold",children:"Loading a dataset"}),Object(Y.jsxs)("ol",{className:"list-decimal",children:[Object(Y.jsxs)("li",{children:["Choose a demo dataset (e.g. nobel_prizes_incorrect) and press Select.",Object(Y.jsx)("img",{src:"https://user-images.githubusercontent.com/72721378/122839332-f3ba1a80-d34b-11eb-8157-eadb74b66a2b.png",alt:""})]}),Object(Y.jsxs)("li",{children:["Add a new cell in the editor by clicking the + icon.",Object(Y.jsx)("img",{src:"https://user-images.githubusercontent.com/72721378/122839450-295f0380-d34c-11eb-889f-c764b61594a4.png",alt:""})]}),Object(Y.jsxs)("li",{children:["In the new cell, type `show = col.find()` to make the Data Browser show all documents in the collection.",Object(Y.jsx)("img",{src:"https://user-images.githubusercontent.com/72721378/122839489-3976e300-d34c-11eb-9a86-a827cbf29119.png",alt:""})]}),Object(Y.jsxs)("li",{children:["Click the single arrow icon to run the cell.",Object(Y.jsx)("img",{src:"https://user-images.githubusercontent.com/72721378/122839560-5e6b5600-d34c-11eb-82d1-1e807002b15c.png",alt:""})]}),Object(Y.jsxs)("li",{children:["The data will be displayed on the Raw tab.",Object(Y.jsx)("img",{src:"https://user-images.githubusercontent.com/72721378/122839638-865ab980-d34c-11eb-8de6-d7bb0b7bc4ee.png",alt:""})]})]}),Object(Y.jsx)("br",{}),Object(Y.jsx)("h2",{className:"my-2 text-3xl font-semibold",children:"Loading a checkpoint"}),Object(Y.jsx)("p",{children:"Data traceability is a very important aspect in data analytics. Data Jupyter supported this by integrating a checkpoint system."}),Object(Y.jsxs)("ol",{className:"list-decimal",children:[Object(Y.jsxs)("li",{children:["Click on the icon to the right.",Object(Y.jsx)("img",{src:"https://user-images.githubusercontent.com/72721378/122839878-07b24c00-d34d-11eb-83e3-c74ebec64cc3.png",alt:""})]}),Object(Y.jsxs)("li",{children:["Select the checkpoint \u201c6/15/2021, 1:09:23 PM\u201d and click Load.",Object(Y.jsx)("img",{src:"https://user-images.githubusercontent.com/72721378/122839882-0aad3c80-d34d-11eb-8de1-05098c8e4b84.png",alt:""})]}),Object(Y.jsxs)("li",{children:["The notebook state will be restored to that checkpoint.",Object(Y.jsx)("img",{src:"https://user-images.githubusercontent.com/72721378/122839900-139e0e00-d34d-11eb-9256-2b475d6f0404.png",alt:""})]})]})]});function ee(){return Object(Y.jsxs)("div",{className:"grid grid-cols-4",children:[Object(Y.jsx)("div",{}),Object(Y.jsx)("div",{className:"col-span-2 py-8 px-12 bg-white shadow-lg rounded-lg my-20",children:$}),Object(Y.jsx)("div",{})]})}var te=n(21),ne=n(114);var re=function(e){var t=e.demoDatasets,n=Object(s.b)(),r=Object(s.c)((function(e){return e.notebook.selectedDataset})),a=Object(ne.a)(),c=a.register,o=a.handleSubmit,l=a.formState.errors;return Object(Y.jsxs)("form",{className:"flex flex-col items-center justify-center",onSubmit:o((function(e){return n(F(e.dataset))})),children:[t.map((function(e){return function(e){return Object(Y.jsxs)("label",{htmlFor:e,children:[Object(Y.jsx)("input",Object(O.a)(Object(O.a)({},c("dataset",{required:!0})),{},{id:e,type:"radio",value:e})),Object(Y.jsx)("span",{className:"ml-2 inline-block ".concat(r===e&&"font-bold"),children:e})]},e)}(e)})),l.dataset&&Object(Y.jsx)("span",{className:"py-2 text-red-500",children:"Please choose a dataset"}),Object(Y.jsx)("button",{type:"submit",className:"button-relief",children:"Select"})]})},ae=n(11),ce=n(48),oe=n.n(ce);n(149),n(150);function se(){var e=Object(s.c)((function(e){return e.browser.raw}));return Object(r.useMemo)((function(){return Object(Y.jsx)(oe.a,{width:"100%",mode:"json",theme:"monokai",readOnly:!0,fontSize:16,minLines:39,maxLines:39,showPrintMargin:!1,value:e})}),[e])}var le=n(111),ie=n.n(le),de=n(112),ue=n.n(de);function be(){var e=Object(s.c)((function(e){return e.browser.table}));return Object(r.useMemo)((function(){return Object(Y.jsx)("div",{className:"px-4 w-full h-80vh bg-gray-50 border border-gray-300 block rounded-md whitespace-nowrap overflow-scroll",children:Object(Y.jsx)(ie.a,{remarkPlugins:[ue.a],children:e})})}),[e])}function je(){var e=Object(s.c)((function(e){return e.notebook.error})),t=Object(s.c)((function(e){return e.notebook.selectedDataset})),n=Object(s.c)((function(e){return e.browser.console}));return Object(Y.jsxs)("div",{className:"px-4 w-full h-80vh bg-gray-50 border border-gray-300 block rounded-md text-left overflow-scroll",children:[e&&Object(Y.jsx)("span",{className:"py-2 text-red-500",children:e}),!t&&"\nNo dataset selected. Please select a dataset first.",Object(Y.jsx)("span",{className:"font-mono",children:n})]})}function pe(e){var t=e.modes,n=Object(s.c)((function(e){return e.notebook.loading})),a=Object(r.useState)(t[0]),c=Object(ae.a)(a,2),o=c[0],l=c[1],i=function(e){e.preventDefault(),l(e.currentTarget.name)},d=t.map((function(e){return Object(Y.jsx)("button",{type:"button",name:e,onClick:i,className:"py-2 px-4 inline-block font-semibold ".concat(o===e?"text-blue-600":"text-gray-400"),children:e})}));return Object(Y.jsxs)("div",{className:"px-4 max-w-4xl min-h-screen",children:[Object(Y.jsxs)("div",{className:"flex flex-row justify-between w-full bg-gray-50 border border-gray-300 rounded-t-md",children:[Object(Y.jsx)("div",{className:"text-left",children:d}),n&&Object(Y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-blue-700 m-2 outline-none animate-spin transform rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(Y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})]}),o===M.Raw&&Object(Y.jsx)(se,{}),o===M.Table&&Object(Y.jsx)(be,{}),o===M.Console&&Object(Y.jsx)(je,{})]})}var he=n(14),xe=n(113);function fe(e){var t=e.handleAddCell,n=e.handleDeleteCell,r=e.handleMoveUpCell,a=e.handleMoveDownCell,c=e.handleRunCell,o=e.handleRunAllCells,s=e.handleSaveCheckpoint,l=e.handleLoadCheckpoint;return Object(Y.jsxs)("div",{className:"px-4 max-w-4xl max-h-screen bg-gray-50 border border-gray-300 rounded-md text-left",children:[Object(Y.jsxs)("div",{className:"flex flex-row justify-between",children:[Object(Y.jsxs)("div",{className:"flex flex-row",children:[Object(Y.jsx)("svg",{onClick:t,"data-tip":"Add New Cell","data-for":"topButtons",xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-blue-500 hover:text-blue-700 hover:bg-gray-200 m-2 cursor-pointer outline-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(Y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),Object(Y.jsx)("svg",{onClick:n,"data-tip":"Delete Cell","data-for":"topButtons",xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-blue-500 hover:text-red-700 hover:bg-gray-200 m-2 cursor-pointer outline-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(Y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Object(Y.jsx)("svg",{onClick:r,"data-tip":"Move Cell Up","data-for":"topButtons",xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-blue-500 hover:text-blue-700 hover:bg-gray-200 m-2 cursor-pointer outline-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(Y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})}),Object(Y.jsx)("svg",{onClick:a,"data-tip":"Move Cell Down","data-for":"topButtons",xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-blue-500 hover:text-blue-700 hover:bg-gray-200 m-2 cursor-pointer outline-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(Y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 13l-5 5m0 0l-5-5m5 5V6"})}),Object(Y.jsx)("svg",{onClick:c,"data-tip":"Run Cell","data-for":"topButtons",xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-blue-500 hover:text-blue-700 hover:bg-gray-200 m-2 cursor-pointer outline-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(Y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),Object(Y.jsx)("svg",{onClick:o,"data-tip":"Run All Cells","data-for":"topButtons",xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-blue-500 hover:text-blue-700 hover:bg-gray-200 m-2 cursor-pointer outline-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(Y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})]}),Object(Y.jsxs)("div",{className:"flex flex-row",children:[Object(Y.jsx)("svg",{onClick:s,xmlns:"http://www.w3.org/2000/svg","data-tip":"Save Checkpoint","data-for":"topButtons",className:"h-7 w-7 text-blue-500 hover:text-blue-700 hover:bg-gray-200 m-2 cursor-pointer outline-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(Y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),Object(Y.jsx)("svg",{onClick:l,xmlns:"http://www.w3.org/2000/svg","data-tip":"Load Checkpoint","data-for":"topButtons",className:"h-7 w-7 text-blue-500 hover:text-blue-700 hover:bg-gray-200 m-2 cursor-pointer outline-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(Y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})})]})]}),Object(Y.jsx)(xe.a,{id:"topButtons",place:"top",effect:"solid"})]})}n(280),n(281);var me,ge=function(e){var t=e.index,n=e.setFocusedCellIndex,r=Object(s.b)(),a=Object(s.c)((function(e){return e.editor.cells[t].execStatus})),c=Object(s.c)((function(e){return e.editor.cells[t].editorContent})),o=Object(s.c)((function(e){return e.editor.cells[t].numOfLines})),l=Object(s.c)((function(e){return e.editor.cells[t].errorStatus})),i="";return Object(s.c)((function(e){return e.editor.lastExecutedCellId===e.editor.cells[t].id}))&&(i="border-l-4 border-green-500"),Object(s.c)((function(e){return e.editor.updateBrowserCellId===e.editor.cells[t].id}))&&(i="border-l-4 border-blue-500"),l&&(i="border-l-4 border-red-500"),Object(Y.jsxs)("div",{className:"flex flex-col p-2 ".concat(i," rounded shadow-md relative hover:shadow-lg overflow-hidden"),children:[Object(Y.jsxs)("div",{className:"flex flex-row justify-between items-start",children:[Object(Y.jsx)("span",{className:"text-lg mr-4 min-w-max",children:"[".concat(a,"]: ")}),Object(Y.jsx)("div",{style:{width:"93%"},className:"mt-2 ring-4 ring-gray-400 ".concat(o<=5?"focus-within:ring-blue-500":"focus-within:ring-yellow-500"," relative"),children:Object(Y.jsx)(oe.a,{width:"100%",mode:"python",theme:"chrome",showGutter:!1,fontSize:16,minLines:1,maxLines:15,value:c,onFocus:function(){return n(t)},onChange:function(e){return r(P({index:t,value:e}))},wrapEnabled:!0})})]}),o>5&&Object(Y.jsx)("span",{className:"mt-2 text-yellow-500 text-right font-bold",children:"Recommended maximum number of lines is 5"})]})};function Oe(e,t){return void 0===t&&(t=e,e=0),Array.from(new Array(t-e).keys()).map((function(t){return t+e}))}function ve(){var e=Object(s.c)((function(e){return e.editor.cells.length})),t=Object(r.useState)(null),n=Object(ae.a)(t,2),a=n[0],c=n[1],o=function(){var t=Object(j.a)(b.a.mark((function t(){var n,r,a,c,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(he.a)(Oe(e)),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=19;break}return a=r.value,t.prev=5,t.next=8,K(R(a));case 8:if(c=t.sent,o=Object(d.d)(c),!o.hasCellError){t.next=12;break}return t.abrupt("break",19);case 12:t.next=17;break;case 14:return t.prev=14,t.t0=t.catch(5),t.abrupt("break",19);case 17:t.next=3;break;case 19:t.next=24;break;case 21:t.prev=21,t.t1=t.catch(1),n.e(t.t1);case 24:return t.prev=24,n.f(),t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[1,21,24,27],[5,14]])})));return function(){return t.apply(this,arguments)}}();return Object(Y.jsxs)("div",{className:"flex flex-col",children:[Object(Y.jsx)(fe,{handleAddCell:function(){return K(E(a))},handleDeleteCell:function(){K(q(a)),c(null)},handleMoveUpCell:function(){null!==a&&a>0&&(K(T({focusedCellIndex:a,step:-1})),c(a-1))},handleMoveDownCell:function(){null!==a&&a<e-1&&(K(T({focusedCellIndex:a,step:1})),c(a+1))},handleRunCell:function(){K(R(null!==a?a:e-1))},handleRunAllCells:o,handleSaveCheckpoint:function(){K(D())},handleLoadCheckpoint:function(){K(_(!0))}}),Object(Y.jsx)("div",{className:"px-4 max-w-4xl h-80vh bg-gray-50 border border-gray-300 block rounded-md text-left overflow-y-scroll",children:Object(Y.jsx)("div",{className:"flex flex-col m-2 gap-4",children:Oe(e).map((function(e){return Object(Y.jsx)(ge,{index:e,setFocusedCellIndex:c},e)}))})})]})}function we(e){var t=e.id,n=e.selectedId,r=e.setSelectedId,a=Object(s.c)((function(e){return e.checkpoint.find((function(e){return e.id===t}))}));return Object(Y.jsx)("li",{onClick:function(){return r(t)},className:"p-4 hover:bg-gray-100 cursor-pointer text-center ".concat(n===t&&"bg-gray-100"),role:"presentation",children:null===a||void 0===a?void 0:a.timestamp})}function ke(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.notebook.loading})),n=Object(s.c)((function(e){return e.checkpoint.map((function(e){return e.id}))})),a=Object(r.useState)(null),c=Object(ae.a)(a,2),o=c[0],l=c[1],i=Object(r.useState)(null),d=Object(ae.a)(i,2),u=d[0],b=d[1];Object(r.useEffect)((function(){e(S())}),[]);return Object(Y.jsx)("div",{className:"bg-gray-400 h-screen w-screen flex justify-center items-center",children:Object(Y.jsxs)("div",{className:"mb-24 bg-white rounded shadow-lg w-2/12",children:[Object(Y.jsxs)("div",{className:"border-b px-4 py-2 flex justify-between items-center",children:[Object(Y.jsx)("h3",{className:"font-semibold text-lg uppercase",children:"Load checkpoint"}),Object(Y.jsx)("svg",{onClick:function(){return e(_(!1))},xmlns:"http://www.w3.org/2000/svg",className:"button-icon hover:text-red-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(Y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]}),Object(Y.jsx)("div",{className:"flex flex-col justify-center",children:n.length>0?Object(Y.jsx)("ul",{className:"divide-y divide-gray-300",children:n.map((function(e){return Object(Y.jsx)(we,{id:e,selectedId:o,setSelectedId:l},e)}))}):Object(Y.jsx)("span",{className:"m-4",children:t?"Loading...":"No checkpoint has been created"})}),Object(Y.jsxs)("div",{className:"flex justify-end items-center w-100 border-t px-2",children:[u&&Object(Y.jsx)("span",{className:"px-4 py-2 text-red-500",children:u}),Object(Y.jsx)("button",{onClick:function(t){t.preventDefault(),o?(e(B(o)),e(_(!1))):b("Invalid selection!")},type:"submit",className:"button bg-blue-600 hover:bg-blue-700",children:"Load"})]})]})})}var ye=(me={},Object(te.a)(me,L.Mongodb,["nobel_prizes_incorrect","movies_incorrect"]),Object(te.a)(me,L.Psql,["courses","enrolls","professors","students"]),me);var Ce=function(e){var t=e.databaseModel,n=Object(s.b)(),a=Object(s.c)((function(e){return e.notebook.showCheckpointModal}));return Object(r.useEffect)((function(){n(U(t))}),[]),Object(Y.jsx)(Y.Fragment,{children:a?Object(Y.jsx)(ke,{}):Object(Y.jsxs)("main",{className:"h-full container mx-auto px-4 py-4 text-center",children:[Object(Y.jsx)("h1",{className:"font-bold text-5xl p-4 border-b-2 border-gray-300",children:t===L.Mongodb?"MongoDB":"PostgreSQL"}),Object(Y.jsxs)("div",{className:"pt-16",children:[Object(Y.jsx)("h1",{className:"font-bold text-3xl uppercase p-4",children:"Choose a demo dataset"}),Object(Y.jsx)(re,{demoDatasets:ye[t]})]}),Object(Y.jsxs)("div",{className:"grid grid-cols-2 gap-6 py-4",children:[Object(Y.jsxs)("div",{children:[Object(Y.jsx)("h1",{className:"font-bold text-3xl uppercase px-4 py-6",children:"Editor"}),Object(Y.jsx)(ve,{})]}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)("h1",{className:"font-bold text-3xl uppercase px-4 py-6",children:"Data Browser"}),t===L.Psql?Object(Y.jsx)(pe,{modes:[M.Table,M.Console]}):Object(Y.jsx)(pe,{modes:[M.Raw,M.Table,M.Console]})]})]})]})})};var Ne=function(){return Object(Y.jsxs)("div",{className:"h-screen w-screen flex flex-col",children:[Object(Y.jsx)(Z,{}),Object(Y.jsxs)(X.c,{children:[Object(Y.jsx)(X.a,{exact:!0,path:["/","/index"],children:Object(Y.jsx)(ee,{})}),Object(Y.jsx)(X.a,{exact:!0,path:"/postgresql",children:Object(Y.jsx)(Ce,{databaseModel:L.Psql},"postgresql")}),Object(Y.jsx)(X.a,{exact:!0,path:"/mongodb",children:Object(Y.jsx)(Ce,{databaseModel:L.Mongodb},"mongodb")})]})]})};o.a.render(Object(Y.jsx)(a.a.StrictMode,{children:Object(Y.jsx)(s.a,{store:G,children:Object(Y.jsx)(l.a,{forceRefresh:!0,children:Object(Y.jsx)(Ne,{})})})}),document.getElementById("root"))}},[[282,1,2]]]);
//# sourceMappingURL=main.b70f5f9e.chunk.js.map